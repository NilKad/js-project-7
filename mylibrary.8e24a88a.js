var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequire6149;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var i={id:e,exports:{}};return t[e]=i,n.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},e.parcelRequire6149=n);var i=n("2ySY5"),o=n("dARph"),r=n("kLGAr");n("fb9GJ");const s=document.querySelector(".movies"),c=document.querySelector('[data-id="watched-btn"'),d=document.querySelector('[data-id="queue-btn"'),l=(document.querySelector(".header-nav__link--current-header"),new(0,r.localStorageAPI));function u(e){const t=e.target.closest("li").dataset.id;if("UL"!==e.target.nodeName)try{const e=l.getData("watched"),a=l.getData("genresList"),n=e.filter((({id:e})=>e===Number(t)))[0],{genre_ids:i}=n;let r;i&&(r=a.filter((({id:e})=>i.includes(e))).map((({name:e})=>e))),n.genres=r,l.setData("current-film",n),(0,o.modalBasicLightbox)(n,"watched"),l.addListenersToBtns()}catch(e){console.log(e.message)}}function g(e){const t=e.target.closest("li").dataset.id;if("UL"!==e.target.nodeName)try{const e=l.getData("queue"),a=l.getData("genresList"),n=e.filter((({id:e})=>e===Number(t)))[0],{genre_ids:i}=n;let r;i&&(r=a.filter((({id:e})=>i.includes(e))).map((({name:e})=>e))),n.genres=r,l.setData("current-film",n),(0,o.modalBasicLightbox)(n,"queue"),l.addListenersToBtns()}catch(e){console.log(e.message)}}c.addEventListener("click",(function(){if(s.removeEventListener("click",g),c.classList.contains("is-active"))return;const e=l.getData("watched"),t=(0,i.createMovieCards)(e);s.innerHTML=t,s.addEventListener("click",u)})),d.addEventListener("click",(function(){if(s.removeEventListener("click",u),!c.classList.contains("is-active"))return;const e=l.getData("queue"),t=(0,i.createMovieCards)(e);s.innerHTML=t,s.addEventListener("click",g)})),function(){console.log("is running");const e=l.getData("watched"),t=(0,i.createMovieCards)(e);s.innerHTML=t,s.addEventListener("click",u)}(),n("1VOaQ"),n("ioBS9"),n("04jNI"),n("82jod");var f=n("25RCP"),m=n("fQ3Fn"),p=n("amyG6");const L=(0,f.initializeApp)({apiKey:"AIzaSyCI5JTbKtHIHNuS4WcbgMfz2S8WxJp_ehM",authDomain:"filmoteka-proj-7.firebaseapp.com",databaseURL:"https://filmoteka-proj-7-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"filmoteka-proj-7",storageBucket:"filmoteka-proj-7.appspot.com",messagingSenderId:"181528100082",appId:"1:181528100082:web:031dd9add36023a4e5e46b",measurementId:"G-1X27T2N03L"}),v=((0,m.getDatabase)(L),(0,p.getAuth)()),h=document.querySelector("#logout-ml"),b=document.querySelector(".welcome-ml");let y,w;(0,p.onAuthStateChanged)(v,(e=>{e?(y=e.uid,w=e.email,console.log("current user = ",w),h.classList.remove("visually-hidden"),b.innerHTML=`Welcome, ${w}!`):(console.log("Не авторизован"),h.classList.add("visually-hidden"))})),h.addEventListener("click",(function(){(0,p.signOut)(v).then((()=>{w=null,window.location.reload()})).catch((e=>{console.log(e)}))}));
//# sourceMappingURL=mylibrary.8e24a88a.js.map
