{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,qCAOA,MAAMC,EAAkBC,SAASC,cAAc,WACzCC,EAAeF,SAASC,cAAc,0BACtCE,EAAaH,SAASC,cAAc,wBAIpCG,GAHiBJ,SAASC,cAC9B,qCAEsB,IAAI,EAAAI,EAAAC,kBAwC5B,SAASC,EAAwBC,GAC/B,MAAMC,EAAaD,EAAEE,OAAOC,QAAQ,MAAMC,QAAQC,GAClD,GAA0B,OAAtBL,EAAEE,OAAOI,SAIb,IACEC,QAAQC,IAAI,sCACZ,MAAMC,EAASb,EAAgBc,QAAQ,WACjCC,EAAef,EAAgBc,QAAQ,cACvCE,EAAOH,EAAOI,QAAO,EAACR,GAAEA,KAASA,IAAOS,OAAOb,KAAa,IAC5Dc,UAAEA,GAAcH,EACtB,IAAII,EACAD,IACFC,EAASL,EACNE,QAAO,EAACR,GAAEA,KAASU,EAAUE,SAASZ,KACtCa,KAAI,EAACC,KAAEA,KAAWA,KAEvBP,EAAKI,OAASA,EACdT,QAAQC,IAAII,EAAM,QAClBL,QAAQC,IAAIC,EAAQ,UAEpBb,EAAgBwB,QAAQ,eAAgBR,IAExC,EAAAS,EAAAC,oBAAmBV,GACnBhB,EAAgB2B,oB,CAChB,MAAOC,GACPjB,QAAQC,IAAIgB,EAAMC,Q,EAItB,SAASC,EAAsB1B,GAC7B,MAAMC,EAAaD,EAAEE,OAAOC,QAAQ,MAAMC,QAAQC,GAClD,GAA0B,OAAtBL,EAAEE,OAAOI,SAIb,IACEC,QAAQC,IAAI,oCAEZ,MAAMC,EAASb,EAAgBc,QAAQ,SACjCC,EAAef,EAAgBc,QAAQ,cACvCE,EAAOH,EAAOI,QAAO,EAACR,GAAEA,KAASA,IAAOS,OAAOb,KAAa,IAC5Dc,UAAEA,GAAcH,EACtB,IAAII,EACAD,IACFC,EAASL,EACNE,QAAO,EAACR,GAAEA,KAASU,EAAUE,SAASZ,KACtCa,KAAI,EAACC,KAAEA,KAAWA,KAEvBP,EAAKI,OAASA,EACdT,QAAQC,IAAII,EAAM,QAClBL,QAAQC,IAAIC,EAAQ,UAEpBb,EAAgBwB,QAAQ,eAAgBR,IAExC,EAAAS,EAAAC,oBAAmBV,GACnBhB,EAAgB2B,oB,CAChB,MAAOC,GACPjB,QAAQC,IAAIgB,EAAMC,Q,EAjGtB/B,EAAaiC,iBAAiB,SAc9B,WAGE,GAFApC,EAAgBqC,oBAAoB,QAASF,GAEzChC,EAAamC,UAAUC,SAAS,aAClC,OAEF,MAAMC,EAAanC,EAAgBc,QAAQ,WACrCsB,GAAS,EAAA3C,EAAA4C,kBAAiBF,GAChCxC,EAAgB2C,UAAYF,EAC5BzC,EAAgBoC,iBAAiB,QAAS5B,E,IAtB5CJ,EAAWgC,iBAAiB,SAyB5B,WAGE,GAFApC,EAAgBqC,oBAAoB,QAAS7B,IAExCL,EAAamC,UAAUC,SAAS,aACnC,OAEF,MAAMK,EAAWvC,EAAgBc,QAAQ,SACnCsB,GAAS,EAAA3C,EAAA4C,kBAAiBE,GAChC5C,EAAgB2C,UAAYF,EAC5BzC,EAAgBoC,iBAAiB,QAASD,E,IA/B5C,WACEnB,QAAQC,IAAI,cACZ,MAAMuB,EAAanC,EAAgBc,QAAQ,WACrCsB,GAAS,EAAA3C,EAAA4C,kBAAiBF,GAChCxC,EAAgB2C,UAAYF,EAC5BzC,EAAgBoC,iBAAiB,QAAS5B,E,CAG5CqC,G","sources":["src/js/my-library.js"],"sourcesContent":["import { createMovieCards } from './moviesMarkup';\n// import { onMovieCardClick } from './moviesGallery';\nimport { modalBasicLightbox } from './modalBasicLightbox';\nimport { localStorageAPI } from './localStorageAPI';\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\n\nconst moviesContainer = document.querySelector('.movies');\nconst watchedBtnEl = document.querySelector('[data-id=\"watched-btn\"');\nconst queueBtnEl = document.querySelector('[data-id=\"queue-btn\"');\nconst myLibraryNavEl = document.querySelector(\n  '.header-nav__link--current-header'\n);\nconst localStorageApi = new localStorageAPI();\n\nwatchedBtnEl.addEventListener('click', onWatchedBtnClick);\nqueueBtnEl.addEventListener('click', onQueueBtnClick);\n// myLibraryNavEl.addEventListener('click', renderCardsWatched);\n\nfunction renderCardsWatched() {\n  console.log('is running');\n  const getWatched = localStorageApi.getData('watched');\n  const markup = createMovieCards(getWatched);\n  moviesContainer.innerHTML = markup;\n  moviesContainer.addEventListener('click', onWatchedMovieCardClick);\n}\n\nrenderCardsWatched();\n\nfunction onWatchedBtnClick() {\n  moviesContainer.removeEventListener('click', onQueueMovieCardClick);\n\n  if (watchedBtnEl.classList.contains('is-active')) {\n    return;\n  }\n  const getWatched = localStorageApi.getData('watched');\n  const markup = createMovieCards(getWatched);\n  moviesContainer.innerHTML = markup;\n  moviesContainer.addEventListener('click', onWatchedMovieCardClick);\n}\n\nfunction onQueueBtnClick() {\n  moviesContainer.removeEventListener('click', onWatchedMovieCardClick);\n\n  if (!watchedBtnEl.classList.contains('is-active')) {\n    return;\n  }\n  const getQueue = localStorageApi.getData('queue');\n  const markup = createMovieCards(getQueue);\n  moviesContainer.innerHTML = markup;\n  moviesContainer.addEventListener('click', onQueueMovieCardClick);\n}\n\nfunction onWatchedMovieCardClick(e) {\n  const targetFilm = e.target.closest('li').dataset.id;\n  if (e.target.nodeName === 'UL') {\n    return;\n  }\n\n  try {\n    console.log('onWatchedMovieCardClick is running');\n    const movies = localStorageApi.getData('watched');\n    const parsedGenres = localStorageApi.getData('genresList');\n    const film = movies.filter(({ id }) => id === Number(targetFilm))[0];\n    const { genre_ids } = film;\n    let genres;\n    if (genre_ids) {\n      genres = parsedGenres\n        .filter(({ id }) => genre_ids.includes(id))\n        .map(({ name }) => name);\n    }\n    film.genres = genres;\n    console.log(film, 'film');\n    console.log(movies, 'movies');\n\n    localStorageApi.setData('current-film', film);\n\n    modalBasicLightbox(film);\n    localStorageApi.addListenersToBtns();\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction onQueueMovieCardClick(e) {\n  const targetFilm = e.target.closest('li').dataset.id;\n  if (e.target.nodeName === 'UL') {\n    return;\n  }\n\n  try {\n    console.log('onQueueMovieCardClick is running');\n\n    const movies = localStorageApi.getData('queue');\n    const parsedGenres = localStorageApi.getData('genresList');\n    const film = movies.filter(({ id }) => id === Number(targetFilm))[0];\n    const { genre_ids } = film;\n    let genres;\n    if (genre_ids) {\n      genres = parsedGenres\n        .filter(({ id }) => genre_ids.includes(id))\n        .map(({ name }) => name);\n    }\n    film.genres = genres;\n    console.log(film, 'film');\n    console.log(movies, 'movies');\n\n    localStorageApi.setData('current-film', film);\n\n    modalBasicLightbox(film);\n    localStorageApi.addListenersToBtns();\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n"],"names":["$2ySY5","parcelRequire","$085d2f9f3e302aeb$var$moviesContainer","document","querySelector","$085d2f9f3e302aeb$var$watchedBtnEl","$085d2f9f3e302aeb$var$queueBtnEl","$085d2f9f3e302aeb$var$localStorageApi","$kLGAr","localStorageAPI","$085d2f9f3e302aeb$var$onWatchedMovieCardClick","e","targetFilm","target","closest","dataset","id","nodeName","console","log","movies","getData","parsedGenres","film","filter","Number","genre_ids","genres","includes","map","name","setData","$dARph","modalBasicLightbox","addListenersToBtns","error","message","$085d2f9f3e302aeb$var$onQueueMovieCardClick","addEventListener","removeEventListener","classList","contains","getWatched","markup","createMovieCards","innerHTML","getQueue","$085d2f9f3e302aeb$var$renderCardsWatched"],"version":3,"file":"mylibrary.a59d6ab6.js.map"}