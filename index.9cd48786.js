!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequire6149;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequire6149=o);var i=o("bpxeT"),a=o("2TvXO"),c=o("lbRHt"),s=o("aTzrc");function u(e){return options={totalItems:e,itemsPerPage:20,visiblePages:5,centerAlign:!1}}var l=o("g2YN6"),d=o("6fJbC"),f=o("1VFfL"),m=document.querySelector(".movies"),v=document.querySelector(".hero-home__form"),p=document.querySelector(".fail-search"),g=new(0,d.localStorageAPI);function h(){return(h=e(i)(e(a).mark((function t(n){var r,o,i,c,s,u;return e(a).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.target.closest("li").dataset.id,"UL"!==n.target.nodeName){e.next=3;break}return e.abrupt("return");case 3:try{o=g.getData("movies"),i=g.getData("genresList"),c=o.filter((function(e){return e.id===Number(r)}))[0],(s=c.genre_ids)&&(u=i.filter((function(e){var t=e.id;return s.includes(t)})).map((function(e){return e.name}))),c.genres=u,g.setData("current-film",c),(0,l.modalBasicLightbox)(c),g.addListenersToBtns()}catch(e){console.log(e.message)}case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return(b=e(i)(e(a).mark((function t(n){var r;return e(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.fetchMoviesByName)(n);case 2:if(0!==(r=t.sent).results.length){t.next=8;break}return p.classList.remove("is-hidden"),setTimeout((function(){return p.classList.add("is-hidden")}),5e3),v.reset(),t.abrupt("return");case 8:m.innerHTML=(0,s.createMovieCards)(r.results),new(e(f))("pagination",u(r.total_results)).on("afterMove",(function(e){var t=e.page;(0,c.fetchMoviesByName)(n,t).then((function(e){m.innerHTML=(0,s.createMovieCards)(e.results),window.scrollTo({top:0,behavior:"smooth"})})).catch((function(e){console.log(e)}))}));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}m.addEventListener("click",(function(e){return h.apply(this,arguments)}));var w,L=o("l5bVx"),S=/^\s+|\s+$/g,q=/^[-+]0x[0-9a-f]+$/i,T=/^0b[01]+$/i,E=/^0o[0-7]+$/i,_=parseInt,x="object"==typeof t&&t&&t.Object===Object&&t,M="object"==typeof self&&self&&self.Object===Object&&self,k=x||M||Function("return this")(),D=Object.prototype.toString,N=Math.max,j=Math.min,I=function(){return k.Date.now()};function O(t){var n=void 0===t?"undefined":e(L)(t);return!!t&&("object"==n||"function"==n)}function H(t){if("number"==typeof t)return t;if(function(t){return"symbol"==(void 0===t?"undefined":e(L)(t))||function(e){return!!e&&"object"==typeof e}(t)&&"[object Symbol]"==D.call(t)}(t))return NaN;if(O(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=O(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(S,"");var r=T.test(t);return r||E.test(t)?_(t.slice(2),r?2:8):q.test(t)?NaN:+t}w=function(e,t,n){var r,o,i,a,c,s,u=0,l=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=r,i=o;return r=o=void 0,u=t,a=e.apply(i,n)}function v(e){return u=e,c=setTimeout(g,t),l?m(e):a}function p(e){var n=e-s;return void 0===s||n>=t||n<0||d&&e-u>=i}function g(){var e=I();if(p(e))return h(e);c=setTimeout(g,function(e){var n=t-(e-s);return d?j(n,i-(e-u)):n}(e))}function h(e){return c=void 0,f&&r?m(e):(r=o=void 0,a)}function y(){var e=I(),n=p(e);if(r=arguments,o=this,s=e,n){if(void 0===c)return v(s);if(d)return c=setTimeout(g,t),m(s)}return void 0===c&&(c=setTimeout(g,t)),a}return t=H(t)||0,O(n)&&(l=!!n.leading,i=(d="maxWait"in n)?N(H(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==c&&clearTimeout(c),u=0,r=s=o=c=void 0},y.flush=function(){return void 0===c?a:h(I())},y};c=o("lbRHt");var A=function(e){console.log(e);var t=e.map((function(e){var t=e.title,n=e.vote_average,r=e.release_date,o=e.id;return r.length>0&&(r=r.slice(0,4)),{title:t,vote_average:n,release_date:r,id:o}}));return console.log("newArr: ",t),t},C=function(e){return e.map(P).join("")},P=function(e,t,n){var r=e.title,o=e.release_date,i=e.id;return'\n      <div class="search-result__item" tadindex="0" data-index='.concat(t," data-id=").concat(i,'>\n        <p class="search-result__title">').concat(r,'</p>\n        <spam class="search-result__date"> (').concat(o,")</spam>\n\n      </div>\n      ")},B=document.querySelector(".search-result"),W=document.querySelector(".hero-home__form"),R=document.querySelector(".form_input"),U=null,z=function(e){console.log("fetchData.results: ",e);var t,n,r=(t=e.results,n=A(t),console.log("new Item: ",n),C(n));F(r)},F=function(e){B.innerHTML=e,document.body.addEventListener("click",$)},$=function(e){e.target.closest(".hero-home__form")||(F(""),document.body.removeEventListener("click",$)),console.log("evt:  ",e);var t=e.target.closest(".search-result__item");console.log("elementOfClick:   ",t);var n=t.dataset.id,r=t.firstElementChild.textContent;console.log("searchID: ",n),console.log("searchName: ",r),F(""),y(r)};W.addEventListener("submit",(function(e){e.preventDefault();var t=W.elements.searchQuery.value.trim();return""===t?console.log("Empty search query"):(F(""),void y(t))}));R.addEventListener("input",e(w)((function(e){0!==(U=e.target.value.trim()).length?(0,c.fetchMoviesByName)(U).then((function(e){console.log("fetchMoviesByName data.results: ",e.results),z(e)})):F("")}),500));var J=o("dyT35"),V=document.querySelector("#signup-btn"),X=document.querySelector("#login-btn"),K=document.querySelector(".close-singup-btn"),G=document.querySelector(".close-login-btn");document.querySelector(".login-btn").addEventListener("click",(function(e){e.preventDefault(),Q.show(),window.addEventListener("keydown",(function(e){"Escape"===e.code&&Q.close()}))}));var Q=J.create(document.querySelector("#modal-welcome"),{className:"modal-registr"});V.addEventListener("click",(function(e){e.preventDefault(),Y.show(),window.addEventListener("keydown",(function(e){"Escape"===e.code&&Y.close()})),Q.close()})),X.addEventListener("click",(function(e){e.preventDefault(),Q.show(),Y.close()})),K.addEventListener("click",Z),G.addEventListener("click",Z);var Y=J.create(document.querySelector("#modal-singup"));function Z(e){e.preventDefault(),Q.close(),Y.close()}document.getElementById("#user-password"),document.querySelector("#user-verify-password");document.querySelector("#signup-submit"),document.querySelector(".modal-registr-btn-sbmt");function ee(){Q.close(),Y.close()}var te,ne=Y.element().querySelector("#registration-form"),re=Y.element().querySelector("#registration-form-email"),oe=Y.element().querySelector("#registration-form-password"),ie=Q.element().querySelector("#login-form"),ae=(Q.element().querySelector("#login-form-name"),Q.element().querySelector("#login-form-email")),ce=Q.element().querySelector("#login-form-password"),se=o("6Urw1"),ue=o("6Nu6u"),le=o("3SEMc"),de=(0,se.initializeApp)({apiKey:"AIzaSyCI5JTbKtHIHNuS4WcbgMfz2S8WxJp_ehM",authDomain:"filmoteka-proj-7.firebaseapp.com",databaseURL:"https://filmoteka-proj-7-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"filmoteka-proj-7",storageBucket:"filmoteka-proj-7.appspot.com",messagingSenderId:"181528100082",appId:"1:181528100082:web:031dd9add36023a4e5e46b",measurementId:"G-1X27T2N03L"}),fe=((0,ue.getDatabase)(de),(0,le.getAuth)()),me=document.querySelector("#logout"),ve=document.querySelector(".welcome"),pe=document.querySelector("#login");(0,le.onAuthStateChanged)(fe,(function(e){e&&(e.uid,te=e.email,me.classList.remove("visually-hidden"),pe.classList.add("visually-hidden"),console.log("current user = ",te),ve.innerHTML="Welcome, ".concat(te,"!"))})),ne.addEventListener("submit",(function(e){e.preventDefault();var t=re.value;console.log(t);var n=oe.value;console.log(n),(0,le.createUserWithEmailAndPassword)(fe,t,n).then((function(e){e.user})).catch((function(e){var t=e.code,n=e.message;console.log(t),console.log(n)})),ne.reset(),ee()})),ie.addEventListener("submit",(function(e){e.preventDefault();var t=ae.value,n=ce.value;(0,le.signInWithEmailAndPassword)(fe,t,n).then((function(e){e.user})).catch((function(e){e.code,e.message})),ie.reset(),ee()})),me.addEventListener("click",(function(){(0,le.signOut)(fe).then((function(){te=null,me.classList.add("visually-hidden"),pe.classList.remove("visually-hidden")})).catch((function(e){})),window.location.reload()}));i=o("bpxeT"),a=o("2TvXO"),c=o("lbRHt"),s=o("aTzrc"),f=o("1VFfL");var ge={totalItems:0,itemsPerPage:20,visiblePages:5,centerAlign:!1},he=document.querySelector(".movies");function ye(){return(ye=e(i)(e(a).mark((function t(){var n;return e(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.fetchTrendingMovies)();case 2:n=t.sent,he.innerHTML=(0,s.createMovieCards)(n.results),ge.totalItems=n.total_results,new(e(f))("pagination",ge).on("afterMove",(function(e){var t=e.page;(0,c.fetchTrendingMovies)(t).then((function(e){he.innerHTML=(0,s.createMovieCards)(e.results),window.scrollTo({top:0,behavior:"smooth"})}))}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){ye.apply(this,arguments)}(),o("4smAb"),o("j1lrD"),o("4Hwvb"),o("dsadE")}();
//# sourceMappingURL=index.9cd48786.js.map
