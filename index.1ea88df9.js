function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},r=t.parcelRequire6149;null==r&&((r=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return o[e]=r,t.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequire6149=r);var s=r("cqGDw"),i=r("2ySY5");var a=r("dARph"),c=r("kLGAr"),l=r("fb9GJ");const u=document.querySelector(".movies"),d=document.querySelector(".hero-home__form"),m=document.querySelector(".fail-search"),f=new(0,c.localStorageAPI);async function v(t){const o=await(0,s.fetchMoviesByName)(t);if(0===o.results.length)return m.classList.remove("is-hidden"),setTimeout((()=>m.classList.add("is-hidden")),5e3),void d.reset();u.innerHTML=(0,i.createMovieCards)(o.results);var n;new(e(l))("pagination",(n=o.total_results,options={totalItems:n,itemsPerPage:20,visiblePages:5,centerAlign:!1})).on("afterMove",(({page:e})=>{(0,s.fetchMoviesByName)(t,e).then((e=>{u.innerHTML=(0,i.createMovieCards)(e.results),window.scrollTo({top:0,behavior:"smooth"})})).catch((e=>{console.log(e)}))}))}u.addEventListener("click",(async function(e){const t=e.target.closest("li").dataset.id;if("UL"===e.target.nodeName)return;try{const e=f.getData("movies"),o=f.getData("genresList"),n=e.filter((({id:e})=>e===Number(t)))[0],{genre_ids:r}=n;let s;r&&(s=o.filter((({id:e})=>r.includes(e))).map((({name:e})=>e))),n.genres=s,f.setData("current-film",n),(0,a.modalBasicLightbox)(n),f.addListenersToBtns()}catch(e){console.log(e.message)}}));var g,p=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,b=/^0o[0-7]+$/i,w=parseInt,S="object"==typeof t&&t&&t.Object===Object&&t,L="object"==typeof self&&self&&self.Object===Object&&self,q=S||L||Function("return this")(),_=Object.prototype.toString,E=Math.max,M=Math.min,T=function(){return q.Date.now()};function D(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function j(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==_.call(e)}(e))return NaN;if(D(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=D(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(p,"");var o=h.test(e);return o||b.test(e)?w(e.slice(2),o?2:8):y.test(e)?NaN:+e}g=function(e,t,o){var n,r,s,i,a,c,l=0,u=!1,d=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var o=n,s=r;return n=r=void 0,l=t,i=e.apply(s,o)}function v(e){return l=e,a=setTimeout(p,t),u?f(e):i}function g(e){var o=e-c;return void 0===c||o>=t||o<0||d&&e-l>=s}function p(){var e=T();if(g(e))return y(e);a=setTimeout(p,function(e){var o=t-(e-c);return d?M(o,s-(e-l)):o}(e))}function y(e){return a=void 0,m&&n?f(e):(n=r=void 0,i)}function h(){var e=T(),o=g(e);if(n=arguments,r=this,c=e,o){if(void 0===a)return v(c);if(d)return a=setTimeout(p,t),f(c)}return void 0===a&&(a=setTimeout(p,t)),i}return t=j(t)||0,D(o)&&(u=!!o.leading,s=(d="maxWait"in o)?E(j(o.maxWait)||0,t):s,m="trailing"in o?!!o.trailing:m),h.cancel=function(){void 0!==a&&clearTimeout(a),l=0,n=c=r=a=void 0},h.flush=function(){return void 0===a?i:y(T())},h};s=r("cqGDw");function k(e){const t=I(e);return console.log("new Item: ",t),N(t)}const I=e=>{console.log(e);const t=e.map((e=>{let{title:t,vote_average:o,release_date:n,id:r}=e;return n.length>0&&(n=n.slice(0,4)),{title:t,vote_average:o,release_date:n,id:r}}));return console.log("newArr: ",t),t},N=e=>e.map(x).join(""),x=({title:e,release_date:t,id:o},n,r)=>`\n      <div class="search-result__item" tadindex="0" data-index=${n} data-id=${o}>\n        <p class="search-result__title">${e}</p>\n        <spam class="search-result__date"> (${t})</spam>\n\n      </div>\n      `,O=document.querySelector(".search-result"),A=document.querySelector(".hero-home__form"),C=document.querySelector(".form_input");let B=null;const P=e=>{console.log("fetchData.results: ",e);const t=k(e.results);$(t)},$=e=>{O.innerHTML=e,document.body.addEventListener("click",G)},G=e=>{e.target.closest(".hero-home__form")||($(""),document.body.removeEventListener("click",G)),console.log("evt:  ",e);let t=e.target.closest(".search-result__item");console.log("elementOfClick:   ",t);const o=t.dataset.id,n=t.firstElementChild.textContent;console.log("searchID: ",o),console.log("searchName: ",n),$(""),v(n)};A.addEventListener("submit",(function(e){e.preventDefault();const t=A.elements.searchQuery.value.trim();return""===t?console.log("Empty search query"):($(""),void v(t))}));C.addEventListener("input",e(g)((e=>{B=e.target.value.trim(),0!==B.length?(0,s.fetchMoviesByName)(B).then((e=>{console.log("fetchMoviesByName data.results: ",e.results),P(e)})):$("")}),500));var H=r("9B8F0");const W=document.querySelector("#signup-btn"),R=document.querySelector("#login-btn"),U=document.querySelector(".close-singup-btn"),F=document.querySelector(".close-login-btn");document.querySelector(".login-btn").addEventListener("click",(function(e){e.preventDefault(),J.show(),window.addEventListener("keydown",(function(e){"Escape"===e.code&&J.close()}))}));const J=H.create(document.querySelector("#modal-welcome"),{className:"modal-registr"});W.addEventListener("click",(function(e){e.preventDefault(),z.show(),window.addEventListener("keydown",(function(e){"Escape"===e.code&&z.close()})),J.close()})),R.addEventListener("click",(function(e){e.preventDefault(),J.show(),z.close()})),U.addEventListener("click",Q),F.addEventListener("click",Q);const z=H.create(document.querySelector("#modal-singup"));function Q(e){e.preventDefault(),J.close(),z.close()}document.getElementById("#user-password"),document.querySelector("#user-verify-password");document.querySelector("#signup-submit"),document.querySelector(".modal-registr-btn-sbmt");function K(){J.close(),z.close()}const Y=z.element().querySelector("#registration-form"),V=z.element().querySelector("#registration-form-email"),X=z.element().querySelector("#registration-form-password"),Z=J.element().querySelector("#login-form"),ee=(J.element().querySelector("#login-form-name"),J.element().querySelector("#login-form-email")),te=J.element().querySelector("#login-form-password");var oe=r("25RCP"),ne=r("fQ3Fn"),re=r("amyG6");const se=(0,oe.initializeApp)({apiKey:"AIzaSyCI5JTbKtHIHNuS4WcbgMfz2S8WxJp_ehM",authDomain:"filmoteka-proj-7.firebaseapp.com",databaseURL:"https://filmoteka-proj-7-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"filmoteka-proj-7",storageBucket:"filmoteka-proj-7.appspot.com",messagingSenderId:"181528100082",appId:"1:181528100082:web:031dd9add36023a4e5e46b",measurementId:"G-1X27T2N03L"}),ie=((0,ne.getDatabase)(se),(0,re.getAuth)()),ae=document.querySelector("#logout");let ce,le;const ue=document.querySelector(".welcome"),de=document.querySelector("#login");(0,re.onAuthStateChanged)(ie,(e=>{e&&(ce=e.uid,le=e.email,ae.classList.remove("visually-hidden"),de.classList.add("visually-hidden"),console.log("current user = ",le),ue.innerHTML=`Welcome, ${le}!`)})),Y.addEventListener("submit",(function(e){e.preventDefault();const t=V.value;console.log(t);const o=X.value;console.log(o),(0,re.createUserWithEmailAndPassword)(ie,t,o).then((e=>{e.user})).catch((e=>{const t=e.code,o=e.message;console.log(t),console.log(o)})),Y.reset(),K()})),Z.addEventListener("submit",(function(e){e.preventDefault();const t=ee.value,o=te.value;(0,re.signInWithEmailAndPassword)(ie,t,o).then((e=>{e.user})).catch((e=>{e.code,e.message})),Z.reset(),K()})),ae.addEventListener("click",(function(){(0,re.signOut)(ie).then((()=>{le=null,ae.classList.add("visually-hidden"),de.classList.remove("visually-hidden")})).catch((e=>{})),window.location.reload()}));s=r("cqGDw"),i=r("2ySY5"),l=r("fb9GJ");const me={totalItems:0,itemsPerPage:20,visiblePages:5,centerAlign:!1},fe=document.querySelector(".movies");!async function(){const t=await(0,s.fetchTrendingMovies)();fe.innerHTML=(0,i.createMovieCards)(t.results),me.totalItems=t.total_results,new(e(l))("pagination",me).on("afterMove",(({page:e})=>{(0,s.fetchTrendingMovies)(e).then((e=>{fe.innerHTML=(0,i.createMovieCards)(e.results),window.scrollTo({top:0,behavior:"smooth"})}))}))}(),r("ioBS9"),r("04jNI"),r("82jod"),r("1VOaQ");
//# sourceMappingURL=index.1ea88df9.js.map
